# 反宾为主的R

## chapter 0： 与python的相爱相杀

如果你不是一个标准意义上的计算机行业从业人员或研究者，但是你需要使用计算机的计算能力来帮助你完成对数据的整合与分析（比如处理大量实验数据的光电、生物领域的研究者或数据分析师）。那你就需要一款编程语言可以协助你高效地处理数据，你显然不希望这款语言像C语言那样自由却也难以驾驭，你需要的就是一种工具式的语言，它要足够简单、易于上手、绝对不要有那些复杂的指针机制或者什么内存回收，另外，最好速度还不慢。

那么，在你选择使用哪一款语言时，这两种语言大概率曾经出现在你的waiting list当中——python与R。

同为近年来在人工智能、大数据、数据分析等处理大量数据的应用领域受到广泛欢迎的编程语言，python与R走出了两条殊途同归的道路。它们继承自不同的语言——python来自于ABC语言，而R来自scheme与S语言；创建时有着不同的目标——python希望融合C语言与shell，而R语言一开始针对的就是统计分析；但是最后却走到了同一个舞台上竞争。有时命运就是这样神奇。

R语言是一款针对统计分析的编程语言，具有以下主要特征。
+ 完善的数据类型，如向量、矩阵、因子、数据集、一般对象等，支持缺失值；
+ 实现了经典的、现代的统计方法，如参数和非参数假设检验、线性回归、聚类等等；
+ 强调交互式数据分析，支持复杂算法描述，图形功能强
+ 解释型语言
+ 函数编程，尽管不是严格遵循函数编程。
+ 支持面向对象

## chapter 1： 缘起

R语言有两位创始人——来自新西兰奥克兰大学的罗斯·伊哈卡（Ross Ihaka）和罗伯特（Robert Gentleman）。

<img src="https://images0.cnblogs.com/blog/43680/201305/16232630-3384ce690c544df7b17d60b778781c66.jpg" width="130"><img src="https://images0.cnblogs.com/blog/43680/201305/16232642-f9e131d78a944f4e99d54532c18d1351.jpg" width=250>  
左为罗斯·伊哈卡，右为罗伯特

最开始，罗斯从一本书中了解到scheme语言，并对其很感兴趣，大约同时，他还得到了一版新的S语言的源代码，这使得他开始注意S语言与scheme的异同点。后来罗斯使用scheme向别人展示词法作用域，但是当时他手边没有scheme的书，于是他就使用S语言作为替代，结果失败了。这就使他萌生了以scheme的语法改进S语言的想法。

过了些年，罗斯与罗伯特在奥克兰大学成为了同事，他们两个当时都研究统计计算方向，也一直试图为实验室找一个更好用的软件，但是当时的商业软件都不能使他们满意。于是，就像之前故事中的大佬们一样，他们也决定那不如就自己写它一个。罗斯联想到自己之前使用scheme语法改进S语言的想法，依然觉得它很不错。于是，他们决定基于此研究一款新的语言，于是R语言诞生了。也正是由于两位创始人的名字以字母R开头，所以它得名R语言。

所以一般认为，R语言继承自两种编程语言——scheme与S语言。R语言从scheme得到了它的语法，从S语言得到了它的内在。这两种语言在中国国内的知名度可能不高，但其实它们两个在国外的应用还是很广泛的，至少不是很冷门的语言。

Scheme语言是Lisp的一个变种，于1975年诞生于麻省理工学院。至少在R语言的两位创始人开发R语言的时候，scheme在国外得到了广泛的应用，甚至就如同如今国内的C++与Java。Scheme的主要特征是可以像操作数据一样操作函数调用，其主要目的是训练人的机器化思维，以其简洁的语言环境和大量的脑力思考而著称。也正是由于这一特点，麻省理工的计算机程序结构和分析课程一直使用scheme教授，直到后来被python取代。

S语言跟R语言的血缘关系极其紧密。早期R就是基于S语言的一个GNU项目，所以R语言也可以当作S语言的一种实现或是变种，通常用S语言编写的代码都可以不作任何修改的在R环境下运行。早在1998年美国计算机协会ACM就授予了S语言的主要设计者约翰·M·钱伯斯（John M.Chambers）“软件系统奖”用来表彰S取得的成就.这是迄今为止众多统计软件中“唯一”被ACM授奖的统计系统。要知道，得过这个奖的作品都是诸如TCP/IP协议、www、Java之类的东西。当时ACM是这样评价S语言的： 永久地改变了人们分析、可视化、处理数据的方式； 是一个优雅的、被广泛接受的、不朽的软件系统。[1] 但我们现在回头来看，S语言更像是借助它的后辈R语言而不朽，而不是自己不朽。

## chapter 2： 走上开源之路

1993年，R语言的两位开发者罗斯与罗伯特将R语言的部分二进制文件放到了卡耐基梅隆大学统计系Statlib中，并在S语言讨论区发了个公告，随后陆续有人下载使用并给出一些反馈。其中，苏黎世理工大学的马丁·马赫（Martin Macher）给两位开发者发邮件，极力劝说他们把源代码公开，让R语言成为开源的、自由的编程语言。两位开发者接纳了这一建议，并于1995年6月将R语言的源代码发布到了自由软件协会的FTP上。[1]

只是当时站在三岔路口，眼见风云千樯，你作出抉择的那一日，在日记上，相当的沉闷和平凡，当时还以为是生命中普通的一天。————《杀鹌鹑的少女》  
有时候命运并不会在我们做抉择时告诉我们将要做出的决定到底具有怎样的意义。马丁当时建议R语言开源的建议与两位开发者开源的决定可能只是在顺应开源软件的潮流。但这个决定某种意义上最终成就了R语言。如果不是开源，R语言很可能只是一个小众的S语言版本，最终早就随着S语言一起消亡了。

我们事后来看，对于一款R语言这样的以统计分析为目标的语言，开源具有极大的好处。开源意味着使用者具有以任何目的运行的自由、具有修改的自由、具有公开自己修改的自由，这对于统计分析至关重要。因为统计分析对准确性的要求是非常高的，但是所有的软件系统，不可避免地会产生bug，甚至是本身对数学机制的理解就不对，还有很多具体处理方法的差异（比如舍入时存在四舍五入、向下、向上、向偶数等）。只有开源，用户能看到源代码，他们才能知道语言到底使用的是哪种方法，到底有没有语言内部的bug。同时，他们还可以修补语言中的bug、对语言进行补充。而在不开源的商业统计分析软件中，这些问题基本避无可避，用户很难知道软件或语言自身到底是怎么个机制，也很难判断到底是自己的代码有问题还是语言本身有问题，即便知道是语言的问题，他们也无从修改。时至今日，即使成熟如Excel，也会存在算出负数方差等bug；而R语言不开源的“父亲”S语言更是早已销声匿迹。如果不是开源的力量，R语言很难走到今天。

两位创作者公开源代码后，随着程序R语言的进一步开发，程序版本的归档又成了一个问题。维也纳工业大学的Kurt Hornik承担了这个任务，在维也纳建立了R程序的归档，这使得程序版本的发布变得更加规范，同时世界各地也出现了R程序的镜像。[1]

1996年，公共邮件系统被创建，此后一直由苏黎世理工大学的马丁·马赫（就是说服两位创建者开源的那位）管理。

1997年年中，R核心团队成立，包含11位成员，一直负责了到现在的R语言版本开发，控制着R核心源代码。同时随着使用的人越来越多，也出现了大量用户自己编写的函数包。同年R语言成为GNU项目。

2001年，R语言有了一个官方刊物——R news，主要用来介绍R语言的最新特征。2009，R news更名为R journal。

R语言诞生于新西兰，后来服务器架设到奥地利，Windows主程序的维护者在加拿大，而Windows附加包维护者在德国，Mac版本维护者在美国，邮件列表维护者在瑞士。这这样的一个多元化的无报酬群体数十年间以志愿者的身份的推动R着语言的发展。众多统计计算或相关领域的程序员也贡献自己的力量，大量统计方法以附加包的形式发布出来，极大地方便了新入门的使用者，放缓了学习曲线。而封闭源代码的商业语言软件很难有此这样的力量。[1]

## chapter 3：君向潇湘我向秦

我们介绍的R语言最初是作为S语言的一个方言存在的，但是在随后的发展中，R语言这一S语言的方言变得越来越流行，而原来的主体语言S语言却逐渐式微，甚至如今已少有人知。

就在两位开发者将R语言开源的同一年(1993年)，S语言的许可证被MathSoft公司买断。1998年发布的S语言可视化的升级版S-PLUS成为其公司的主打数据分析产品。因为S语言与S-PLUS是商业软件语言，它当然是闭源的。由于S-PLUS继承了S语言的优秀血统，所以被世界各国的统计学家广泛使用。

但随着R语言在1997被接受为GNU项目，大量的计算机研究人员与统计领域研究人员开始关注R语言。之后，R语言开始快速发展。这个过程中，免费的开源软件的优势也不断体现。大量原本的S-PLUS的付费用户发现他们有了一个开源而且免费的选择。使用这款新的语言不仅不用花钱，而且可以看到它的源码并进行合法的改动，这给开发研究工作带来了极大的便利。于是大量S-PLUS的用户转而投向了R语言的怀抱。这些新开发者的加入又壮大了R语言社区，于是R语言不断完善，有了越来越多的第三方函数库，又吸引来了更多的人，形成了一个良性的循环。甚至S语言的创始人约翰·M·钱伯斯最后都成为了R语言核心团队的一员。这使得R语言这一S语言的分支变得越来越流行，使用者越来越多，而原本作为主体的S语言的使用人群却在不断萎缩。

时至今日，R语言保持着快速的版本更迭与发展速度，并且保持了软件系统的短小精悍，如今更是借大数据的东风名噪一时。

而S-PLUS命途多舛，几易其主。2004年，Insightful花费200万美元从Lucent购买了S语言。2006年，Alcatel购买了Lucent Technologies，并改名为Alcatel-Lucent。2008年，TIBCO以2500万美元控股Insightful。从1998之后，S语言就再没有过重大更新了。一款曾经获得ACM软件系统奖项的优秀语言的结局令人唏嘘，不过我们也可以认为它的生命在R语言身上延续着。

## chapter 4：版本更迭

1993年，第一个R声明发布。

2000年，R 1.0.0发布

2004年，R 2.0.0发布

2013年 R 3.0.0发布

2020年2月29日，R语言3版本的最后一版R 3.6.3发布；2020年4月24日，R 4.0.0发布。

在最新的（2020年4月）TIOBE编程语言排行榜中，R语言名列第10位。


## Reference

[1]https://www.cnblogs.com/chenkai/archive/2013/05/16/3082889.html

[2]https://www.w3cschool.cn/r/r_overview.html

[3]http://www.math.pku.edu.cn/teachers/lidf/docs/Rbook/html/_Rbook/intro.html

[4]https://www.r-project.org/

[5]https://www.oschina.net/news/39268/rlang-3-0
