# C语言：一颗仍未黯淡的昨日明星/点亮世界的C语言

## chapter 0 ：“Hello，World”

但凡一脚踏入信息世界大门的人，想必都听说过C语言金光璀璨的大名。无数程序员或者非程序员都曾学习了解过它，有时恨入骨髓，有时又爱得发狂。想想某个夜深人静的夜晚，你坐在电脑前，漆黑一片的室内只有电脑屏幕闪烁微光。你手边放了一杯仍带着余温的咖啡，双手在键盘上小心翼翼地打出下面这行代码：

**printf("hello,world!\n");**

程序运行成功的那一刻，浩瀚飘渺的信息世界的大门从此向你展开！

那么究竟是谁创造了C语言，C语言又是经历了什么发展到今天这个样子的呢？

对这个问题，让我们从头说起。

## chapter 1 : C位出道C语言

谈到C语言的诞生，就不得不谈到贝尔实验室。没错，就是那个发明了电话的贝尔！在1877年，因为获得了世界上第一台可用电话机的专利权，贝尔成立了一家叫美国贝尔电话公司的公司。在1899年，AT&T整合了贝尔电话公司的业务，成立了贝尔系统的母公司，而贝尔实验室就是AT&T公司的科学大脑。

在20世纪60年代，贝尔实验室的研究员，一个叫Ken Thompson的家伙，发明了B语言，并用B语言编了一个游戏Space-Travel。B语言是一种无数据类型语言，所有的数据都和机器字相对应，程序员可以直接通过内存地址操作内存。

Ken想要自己玩这个游戏，但又不想被老板发现，于是他就背着老板偷偷找了一个空闲机器——PDP-7。这是台没有操作系统的机器，为了能顺利玩上这个游戏，Ken开始着手为PDP-7开发一个操作系统，后来这个OS被命名为UNIX（如今操作系统界巨头之一）。

突然有一天，Ken的同事D.M.Ritchie玩心大发，也想要玩同事Ken Thompson开发的游戏Space-Travel，于是他加入了Ken，开始和他一起开发UNIX，而他负责的主要工作就是改进肯的B语言。大佬就是大佬，DM改着改着就改出了一个新语言，并把它取名为C语言。

至此，一种未来风靡流行几十年的语言C语言就这样在机缘巧合之下诞生了！

注：C语言诞生后，DM和他的同事肯迫不及待地用C语言完全重写了UNIX。此时，编程的乐趣已经完全使他们忘记了最开始那个可怜的游戏，两人一门心思地投入到了UNIX和C语言的开发之中。从此以后，UNIX和C语言相互扶持、共同成长，相辅相成到了今天。


![Markdown Screenshot](https://img-blog.csdn.net/20160501115739059)

Ken Thompson（left）和D.M.Ritchie（right）


## chapter 2: C语言的发展
### The C Programming language

事实上，<strike>在上一章我们</strike>说C语言C位出道其实并不太准确，至于原因却还是要从贝尔实验室来说起。

自1925年以来，贝尔实验室一共获得了两万五千多项专利，诞生过9位诺贝尔奖得主。这样登峰造极的履历也让其他机构望尘莫及。在20世纪二三十年代，贝尔实验室的研究人员发明了晶体管，电荷耦合元件，光电池和无线电天文学等。在通讯领域中大名鼎鼎的Claude Elwood Shannon的成果也有部分是基于Harry Nyquist和Hartley从前在贝尔实验室中的研究。

这所实验室在2016年被诺基亚收购，就是那个被我们戏称手机可以当板砖使用的诺基亚公司。然而就像诺基亚手机一样，贝尔实验室现在也慢慢失去了原本辉煌的本色，在历史的尘埃中渐渐没落。但在20世纪，那个群星璀璨的年代，那个拥有爱因斯坦、薛定谔、普朗克等等杰出科学家的年代，那个被炮火硝烟笼罩的年代，贝尔实验室无疑是这个星球上最伟大的实验室。

**没有之一。**

![Markdown Screenshot](https://img-blog.csdn.net/20160501110431758)
位于美国新泽西州的贝尔实验室总部

正是因为贝尔实验室太过出色，所以即使是编程语言这么举足轻重的发明，也在实验室的整体历史中显得有些微不足道。但如果我们仅仅将视线聚焦于编程领域，C语言依旧是一个改变历史的里程碑式发明。

1969到1973年间，C的出现实际上伴随着unix操作系统的早期发展。73年的早期，现代C的基础部分已经完成，那一年燥热的夏天里，C语言和它的编译器终于已经足够强大，允许我们用C为PDP-11重写Unix内核。事实上，在1972年的时候Thompson已经简短尝试用C的早期版本——结构体之前，生成系统代码，但不知道为什么后来他放弃了那次努力。

78年的时候，Unix系统的可移植性得到了证实，C语言越来越广为人知。为了延长语言的生命力，也为了C语言更容易被人们学习理解，DM与Brain Kernighan合作出版了《The C Programming Language》。后来也许是嫌这个名字不够含蓄，业内人士都更喜欢称这本书为‘白皮书’或者K&R。

有趣的是尽管K&R第一版描述了把C的类型结构用于其呈现形式的大部分规则，许多程序的编写仍然使用了遗留的旧式、更松散风格，而且编译器还得容忍它们。所以为了鼓励人们更加关注于正式的语言规则、检测合法但可疑的写法、并帮助发现分离编译中简单机制难以检测的接口的错误匹配，Steve Johnson修改其pcc而产生了lint[Johnson 79b]，用于扫描一系列文件并标记可疑的写法，我想这大概就是我们所谓词法分析的前身了。

第一版的K&R只是一个比松散结构更细腻一些的描述，像是用胶水填补了旧木板中的裂缝。如果想将C语言正式用于商业和政府的合同项目，一个正式的标准文件就必不可少。在1983年夏天，ANSI建立了接受CBEMA的指导的X3J11委员会，目标是制订一个C标准。X3J11在1989年末提出了一个他们的报告[ANSI 89]，后来这个标准被ISO接受为ISO/IEC 9899-1990。也就是说，所谓的C89与C90其实是同一个C语言版本，只是一个被ANSI认证，另一个被ISO认证。

从最开始，X3J11委员会就在语言扩展上采取了谨慎、保守的态度。他们的目标是：“为C程序设计语言制订一个清晰、一致和无二义性的标准，规范C的通用、现行的定义，促进不同C语言环境下的用户程序的可移植性。”

也正是因为这种理念，C语言核心在标准化过程中几乎毫发无伤，比起一个全新的发明，它更像一个需要不断完善的法典。X3J11非常正确地认识到一个完整和仔细的标准C库(standard C library)的描述与它所服务的语言本身的描述同等的重要。这样聪明而智慧的想法也进一步为C语言的未来打好了基础。

C89奠定了C语言一贯的指导原则：相信程序员，不要妨碍他们做事。与K&R相比，C89主要包括了以下修改：加入关键字const、void、signed；增加了函数原型；允许将结构作为参数传递给函数等。

1995年，C语言又进行了一次修订，这次修订后来成为了1999年发布的 ISO/IEC 9899:1999标准，也就是通常说的C99。这次的改动主要包括：加入了内联函数inline、支持longl long int、新增了布尔数据类型、加入了我们现在常用的单行注释\\\\、允许在for循环内部进行变量声明。但是各个公司对支持C99表现出了不同的兴趣，比如当GCC支持大部分C99特性时，微软却对此不甚积极。我们写C语言代码时也可以发现，这些特性中只有一部分被普遍地支持了，而另一部分仍然被视为非法的。  [11]

2007年，ISO又开始了新一轮的C语言标准修订，由于一开始没人知道他们什么时候能修订完，所以这个版本最初被称为C1X。到了2011年，修订工作完成，这一版本也定名为C11。这次的修订主要改动包括：删除了gets()函数，以gets_s()代替；支持多线程；支持Unicode，但仅限于UTF-8，依然不支持UTF-16；加入原子操作；改进与C++的兼容性。但各方反响依然不甚积极，这可能也是由于C11标准的最终定稿草案是免费开放的，但是C11正式标准文件是需要付费的。[12]

2018年，C18发布，这是目前的最新C语言版本。它没有加入什么新的内容，只是修正了C11中的一些缺陷。到目前为止，广泛使用的C语言版本仍然是ANSI/ISO C，即C89。

C语言的成功远远超出了所有人的预期，在它成功的原因中Unix做出了杰出贡献。Unix本身的成功让C语言得以被成千上万的人使用，尽管有些时候C语言也让人头痛，但它并不失为一个简单和小巧的语言可以被人容易的学习和简单使用。

在实际用途中，它总是被用来同一个大型操作系统交互，并作为工具来创建更大工具。这如同葛朗台般吝啬的行为使得C覆盖了多数程序员的基本需要，但又不试图提供太多东西，反而更加激发了人们在使用它时的创造性。

从第一版的白皮书，到后来的多版修正和编辑，不论C语言经受何种变化，对于C语言本身而言，比起那些同样流行的语言如Pascal和Fortra，它仍保持着显著的稳定性和一致性。从C88，C99到C11，这些标准既保证了C语言的活力，又让它不在时代的浪潮中消逝。那些随着指尖跳跃而出现在屏幕上的字符，从简易的命令行，到色彩亮丽功能齐全的IDE，编程语言的发展一点点、一步步地推动了时代的变迁，在历史曲折的车轮下，留下了难以忘怀的印记。


##		chapter 3: C语言的继任者

C++是由Bjarne Stroustrup及其同事创建的基于C语言扩展的、高层次、通用编程语言，或者说是“使用类的C语言”。随着时间的推移，该语言得到了显著的扩充，除了低级内存操作工具外，现代C++还具有面向对象的、通用的功能特性。C++总是作为编译语言被应用，许多厂商都提供C++编译器，包括自由软件基金会、LLVM、Microsoft、Intel、Oracle和IBM，C++也因此可以在许多平台上使用[14]。  

C++起初被命名为"new C"，之后被称为"C with Classes",C++这个名字是Rick Mascitti于1983年中所建议的，并于1983年12月首次使用。C++最后的名字灵感来自C语言中的“++”操作符（其对变量的值进行递增），而且在共同的命名约定中，使用“+”以表示增强的程序。Rick Mascitti在1992年被非正式地问起名字的由来，他表示这是在半开玩笑中说出的。他从没想过C++会成为这门语言的正式名字。有一个关于C++名字的笑话，当你使用后缀++时，附加只发生在运算之后（因此，它应该是++C，而不是C++，这个笑话是说时下某些程序员还在以使用C的方式使用C++，这通常被一些权威著作认为是不正确的）[15]。

##	chapter 4: 有关Dennis MacAlistair Ritchie的一点趣事
1968年，Ritchie在Patrick C. Fischer的指导下，在哈佛大学完成了他的博士论文《Program Structure and Computational Complexity》。然而，Ritchie从未正式获得博士学位[13]。  

上世纪70年代，Ritchie与James Reeds和Robert Morris合作，对美国M-209型密码机发起了一场唯密文攻击。M-209型密码机至少能破解2000-2500个字母的信息。Ritchie提到，在与美国国家安全局（NSA）讨论之后，作者决定不发表这篇文章，因为他们被告知这一原则适用于外国政府仍在使用的机器[13]。  



##	chapter 5：C开源项目
### 编译器
#### GCC C
GNU编译器套装（英语：GNU Compiler Collection，缩写为GCC），指一套编程语言编译器，以GPL及LGPL许可证所发行的自由软件，也是GNU计划的关键部分，也是GNU工具链的主要组成部分之一。GCC（特别是其中的C语言编译器）也常被认为是跨平台编译器的事实标准。1985年由理查德·马修·斯托曼开始发展，现在由自由软件基金会负责维护工作。

原名为GNU C语言编译器（GNU C Compiler），因为它原本只能处理C语言。GCC在发布后很快地得到扩展，变得可处理C++。之后也变得可处理Fortran、Pascal、Objective-C、Java、Ada，Go与其他语言。

许多操作系统，包括许多类Unix系统，如Linux及BSD家族都采用GCC作为标准编译器。

GCC原本用C开发，后来因为LLVM、Clang的崛起，它更快地将开发语言转换为C++。许多C的爱好者在对C++一知半解的情况下主观认定C++的性能一定会输给C，但是Ian Lance Taylor给出了不同的意见，并表明C++不但性能不输给C，而且能设计出更好，更容易维护的程序[4]。
#### Clang
是一个C、C++、Objective-C和Objective-C++编程语言的编译器前端。它采用了LLVM作为其后端，而且由LLVM2.6开始，一起发布新版本。它的目标是提供一个GNU编译器套装（GCC）的替代品，支持了GNU编译器大多数的编译设置以及非官方语言的扩展。作者是克里斯·拉特纳（Chris Lattner），在苹果公司的赞助支持下进行开发，而源代码许可是使用类BSD的伊利诺伊大学厄巴纳-香槟分校开源码许可。Clang项目包括Clang前端和Clang静态分析器等[5]。
#### Small-c
Small-c既是C编程语言的一个子集，适用于资源有限的微型计算机和嵌入式系统，也是该子集的一个实现。最初作为1970年代末和1980年代初可用的微型计算机系统的早期编译器是很有价值的，作为一个简单到足以用于教学目的的例子，这个实现也很有用。  

最初的编译器是Ron Cain用Small-C为Intel 8080编写的，发表在1980年5月的*Dr. Dobb's Journal of Computer Calisthenics & Orthodontia*上。James E. Hendrix改进并扩展了最初的编译器，并编写了Small-c手册。Ron使用John Bass提供的Small-c开发的账号在SRI PDP 11/45 Unix系统上启动了Small-c。提供的源代码是在管理权限下发布到公共域的。Small-c对于微型计算机非常重要，这在某种程度上类似于GCC对于大型计算机的重要性

Small-c是一个可重定向编译器。移植Small-c只需要为目标处理器重写后端代码生成器和库到操作系统接口调用。[6]
#### Intel C++ Compiler
Intel C++ Compiler，也称为icc或icl，是一组来自Intel的C和C++编译器，适用于Windows、Mac、Linux、FreeBSD和基于Intel的Android设备[7]。  

### C语言库
#### libc
如ANSI C标准中所述，C标准库libc是C编程语言的标准库。它是与C库POSIX规范同时开发的，后者是它的超集。由于ANSI C被国际标准化组织采用，C标准库也被称为ISO C库。  
C标准库为诸如字符串处理、数学计算、输入/输出处理、内存管理和其他操作系统服务等任务提供宏、类型定义和函数[8]。
#### glibc
glibc(GNU C Library)项目为GNU系统、GNU/Linux系统,以及许多其他使用Linux作为内核的系统提供了核心库。这些库提供了关键的API，包括ISO C11、POSIX.1-2008、BSD、针对于操作系统的API等等。这些API包括诸如open、read、write、malloc、printf、getaddrinfo、dlopen、pthread_create、crypt、login、exit等。  
GNU C库被设计成一个向后兼容的、可移植的、高性能的ISO C库。它旨在遵循所有相关标准，包括ISO C11、POSIX.1-2008和IEEE 754-2008[9]。
#### glib
GLib是一个跨平台的、用C语言编写的五个底层库的集合，为GNOME所使用。GLib起初是GTK+的一部分，但到了GTK+第二版，开发者决定把跟图形界面无关的代码分开，这些代码于是就组装成了GLib。  
因为GLib具有跨平台特性，所以用它编写的程序可以无需进行大幅度修改就可以在其他程序上编译和运行[10]。

### Reference   
[1]http://wikipedia.org   
[2]http://blog.csdn.net  
[3]https://zh.wikipedia.org/zh-hans/贝尔实验室 历史与成就部分  
[4]https://zh.wikipedia.org/wiki/GNU_Compiler_Collection  
[5]https://zh.wikipedia.org/wiki/Clang  
[6]https://en.wikipedia.org/wiki/Small-C  
[7]https://en.wikipedia.org/wiki/Intel_C%2B%2B_Compiler  
[8]https://en.wikipedia.org/wiki/C_standard_library  
[9]https://www.gnu.org/software/libc/  
[10]https://zh.wikipedia.org/wiki/GLib  
[11]https://blog.csdn.net/lengye7/article/details/80255833   
[12]https://blog.csdn.net/qq_41070844/article/details/100115504   
[13]https://en.wikipedia.org/wiki/Dennis_Ritchie#Personal_life_and_career  
[14]https://en.wikipedia.org/wiki/C%2B%2B  
[15]http://blog.sina.com.cn/s/blog_ed323a6a0101rzyd.html  #名称由来
